<!-- action buttons (comment, pic, import) at the top of the bar -->
<ion-segment id="action-buttons" value="comment" color="secondary">
  <ion-segment-button *ngFor='let item of items'
    color="primary" [disabled]="item.busy" (click)='item.handler($event)'
    [value]="item.text"
    >
    <div *ngIf='item.type === "button" && (gib !== "gib" || item.allowPrimitive)' color="primary">
      <ion-icon *ngFor="let iconName of item?.icons" slot="start" [name]="iconName"></ion-icon>
      <ion-spinner *ngIf="item.busy" name="circles" color="tertiary"></ion-spinner>
    </div>

    <div *ngIf='item.type === "inputfile" && (gib !== "gib" || item.allowPrimitive)' color="primary">
      <ion-icon *ngFor="let iconName of item?.icons" slot="start" [name]="iconName"></ion-icon>
      <ion-spinner *ngIf="item.busy" name="circles" color="tertiary"></ion-spinner>
    </div>
  </ion-segment-button>
</ion-segment>
<!-- does not use segment ...delete this in awhile -->
<!-- <div id="action-buttons">
  <div *ngFor='let item of items'>
    <ion-button *ngIf='item.type === "button" && (gib !== "gib" || item.allowPrimitive)'
      color="primary" [disabled]="item.busy" (click)='item.handler($event)'>
      <ion-icon *ngFor="let iconName of item?.icons" slot="start" [name]="iconName"></ion-icon>
      <ion-spinner *ngIf="item.busy" name="circles" color="tertiary"></ion-spinner>
    </ion-button>

    <ion-button *ngIf='item.type === "inputfile" && (gib !== "gib" || item.allowPrimitive)'
      color="primary"
      (click)='item.handler($event)'>
      <ion-icon *ngFor="let iconName of item?.icons" slot="start" [name]="iconName"></ion-icon>
      <ion-spinner *ngIf="item.busy" name="circles" color="tertiary"></ion-spinner>
    </ion-button>
  </div>
</div> -->

<!-- action detail -->
<div *ngIf="actionDetailVisible && gib !== 'gib'" class="action-detail">

  <!-- comment -->
  <div *ngIf="actionDetailMode === 'comment'" class="comment-detail" >
    <ion-textarea #textareaComment id="textareaCommentId" class="detail-content"
      (ionChange)="handleCommentDetailChange($event)"
      (keypress)="handleCommentDetailInput($event)"
      autocomplete="true"
      spellcheck="true"
      [debounce]="debounceMs"
      >
    </ion-textarea>
    <ion-button class="send-btn" color="primary"
      [disabled]="sending"
      (click)="send_AddComment()">
      <ion-icon name="chatbox-outline"></ion-icon>
      <ion-icon *ngIf="!sending" name="arrow-forward-outline"></ion-icon>
      <ion-spinner *ngIf="sending" name="circles" color="tertiary"></ion-spinner>
    </ion-button>
  </div>

  <!-- pics/files -->
  <div *ngIf="actionDetailMode === 'file'" class="file-detail">
    <div class="detail-content file-detail-content">
      <!-- thumbnails -->
      <ion-list id="thumbnails">
        <ion-item *ngFor="let candidate of resCreatePicCandidates;trackBy: trackByPicSrc"
          class="thumbnail-item thumbnail-like">
          <ion-thumbnail>
            <img [src]='candidate.picSrc'/>
          </ion-thumbnail>
          <ion-badge>
            <ion-button (click)="cancelPic(candidate)" [disabled]="sending" color="danger">
              <ion-icon name="close-outline"></ion-icon>
            </ion-button>
          </ion-badge>
        </ion-item>
      </ion-list>
      <!-- add from file btn -->
      <ion-button class="thumbnail-btn thumbnail-like" (click)='inputFile.click()'
        [disabled]="sending" slot="icon-only" size="small">
        <ion-icon name="image-outline"></ion-icon>
        <ion-badge slot="end">+</ion-badge>
        <input #inputFile type="file" hidden (change)="handleAddFileCamClick($event, 'file')"/>
      </ion-button>
      <!-- add from camera btn -->
      <ion-button class="thumbnail-btn thumbnail-like" (click)='inputFile_Cam.click()'
        [disabled]="sending" slot="icon-only" size="small">
        <ion-icon name="camera-outline"></ion-icon>
        <ion-badge slot="end">+</ion-badge>
        <input #inputFile_Cam type="file" hidden (change)="handleAddFileCamClick($event, 'camera')"/>
      </ion-button>
    </div>
    <!-- send btn -->
    <ion-button class="send-btn" color="primary"
      (click)="send_AddPics()"
      [disabled]="sending">
      <ion-icon name="camera-outline"></ion-icon>
      <ion-icon name="image-outline"></ion-icon>
      <ion-icon *ngIf="!sending" name="arrow-forward-outline"></ion-icon>
      <ion-spinner *ngIf="sending" name="circles" color="tertiary"></ion-spinner>
    </ion-button>
  </div>

  <!-- import -->
  <div *ngIf="actionDetailMode === 'import'" class="import-detail" [disabled]="sending">
    <ion-input #inputImport id="inputImportId" class="detail-content"
      (ionChange)="handleImportDetailChange($event)"
      [debounce]="debounceMs"
      >
    </ion-input>
    <ion-button class="send-btn" color="primary"
      (click)="send_AddImport()"
      [disabled]="sending">
      <ion-icon name="sparkles-outline"></ion-icon>
      <ion-icon name="download-outline"></ion-icon>
      <ion-icon *ngIf="!sending" name="arrow-forward-outline"></ion-icon>
      <ion-spinner *ngIf="sending" name="circles" color="tertiary"></ion-spinner>
    </ion-button>
  </div>

</div>
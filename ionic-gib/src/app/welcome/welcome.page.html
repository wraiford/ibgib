<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button slot="icon-only" color="primary"></ion-menu-button>
      <ion-button *ngIf="showBackChevronBtn" class="back-btn" (click)="handleBackButtonClick()">
        <ion-icon name="chevron-back-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title color="primary">welcome</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <swiper
    [autoplay]="false" [keyboard]="true"
    [pagination]="{type: 'progressbar'}" [navigation]="false"
    [scrollbar]="true" [zoom]="true" [loop]="false"
    [slidesPerView]="1" [scrollbar]="false"
    (swiper)="this.mainSwiper = $event"
    (slideChange)="handleMainSwiperSlideChange()"
    effect="cube" [cubeEffect]="{shadow: false}"
    >

    <!-- logoesque slide -->
    <ng-template swiperSlide>
      <div class="swiper-slide-content">
        <ion-card>
          <ion-card-header>
            <ion-card-title color="primary">ibgib</ion-card-title>
            <ion-card-subtitle color="primary">i believe</ion-card-subtitle>
          </ion-card-header>

          <ion-card-content>
            <div #svgContainer></div>
            <p>this prototype humbly flaunts the most hopeful crypto DLT protocol</p>
            <p>(note: it is not a token)</p>
          </ion-card-content>
        </ion-card>
      </div>
    </ng-template>

    <!-- intro vertical slide -->
    <!-- <ng-template swiperSlide>
      <div class="swiper-slide-content">
        <ion-card>
          <ion-card-header>
            <ion-card-title>ibgib</ion-card-title>
            <ion-card-subtitle>intro...</ion-card-subtitle>
          </ion-card-header>

          <ion-card-content>
            <swiper class="swiper-container-vertical"
              [autoplay]="false" [speed]="500"
              [navigation]="true" [direction]="'vertical'" [spaceBetween]="0"
              [loop]="true" [freeMode]="false" [slidesPerView]="3"
              [loopPreventsSlide]="false" [mousewheel]="true"
              [keyboard]="true"
              [allowTouchMove]="true" [grabCursor]="true"
              (swiper)="handleSwiper($event, 'intro')"
              (slideChange)="handleVertSlideChange($event[0], 'intro')"
              >
            <ng-template *ngFor="let x of verticalSwiperTidbits.intro" swiperSlide>
              <div class="slide-with-border tidbit">
                <h2 *ngIf="!x.focused" class="tidbit-title" ibFadeOutAnimation
                  >{{x.title}}</h2>
                <h2 *ngIf="x.focused" class="tidbit-title" ibFadeInAnimation
                  >{{x.title}}</h2>
                <p *ngIf="x.focused" class="tidbit-body"
                  ibChildAddedAnimation
                  >{{x.body}}</p>
              </div>
            </ng-template>
            </swiper>

          </ion-card-content>
        </ion-card>
      </div>
    </ng-template> -->

    <!-- protocol features vertical slide -->
    <ng-template swiperSlide>
      <!-- note on ngIf: there is some kind of visual bug overlapping nested slides after some threshold with cube effect -->
      <div *ngIf="mainSwiper?.realIndex === 1" class="swiper-slide-content">
        <ion-card>
          <ion-card-header>
            <ion-card-title>ibgib</ion-card-title>
            <ion-card-subtitle>the protocol</ion-card-subtitle>
          </ion-card-header>

          <ion-card-content>
            <swiper class="swiper-container-vertical"
              [autoplay]="{delay: 10000, disableOnInteraction: false}"
              [speed]="6000"
              [navigation]="false"
              [direction]="'vertical'" [spaceBetween]="0"
              [loop]="true" [freeMode]="true" [slidesPerView]="3"
              [loopPreventsSlide]="false" [mousewheel]="true"
              [keyboard]="true"
              [allowTouchMove]="true" [grabCursor]="true"
              (swiper)="handleSwiper($event, 'protocol')"
              (slideChange)="handleVertSlideChange($event[0], 'protocol')"
              >
            <ng-template *ngFor="let x of verticalSwiperTidbits.protocol" swiperSlide>
              <div class="slide-with-border tidbit">
                <h2 *ngIf="!x.focused" class="tidbit-title" ibFadeOutAnimation
                  >{{x.title}}</h2>
                <h2 *ngIf="x.focused" class="tidbit-title" ibFadeInAnimation
                  >{{x.title}}</h2>
                <p *ngIf="x.focused" class="tidbit-body"
                  ibChildAddedAnimation
                  >{{x.body}}</p>
              </div>
            </ng-template>
            </swiper>

          </ion-card-content>
        </ion-card>
      </div>
    </ng-template>

    <!-- app features vertical slide -->
    <ng-template swiperSlide>
      <!-- note on ngIf: there is some kind of visual bug overlapping nested slides after some threshold with cube effect -->
      <div *ngIf="mainSwiper?.realIndex === 2" class="swiper-slide-content">
        <ion-card>
          <ion-card-header>
            <ion-card-title>ibgib</ion-card-title>
            <ion-card-subtitle>this prototype</ion-card-subtitle>
          </ion-card-header>

          <ion-card-content>
            <swiper class="swiper-container-vertical"
              [autoplay]="{delay: 10000, disableOnInteraction: false}"
              [speed]="6000"
              [navigation]="false"
              [direction]="'vertical'" [spaceBetween]="0"
              [loop]="true" [freeMode]="false" [slidesPerView]="3"
              [loopPreventsSlide]="false" [mousewheel]="true"
              [keyboard]="true"
              [allowTouchMove]="true" [grabCursor]="true"
              (swiper)="handleSwiper($event, 'app')"
              (slideChange)="handleVertSlideChange($event[0], 'app')"
              >
            <ng-template *ngFor="let x of verticalSwiperTidbits.app" swiperSlide>
              <div class="slide-with-border tidbit">
                <h2 *ngIf="!x.focused" class="tidbit-title" ibFadeOutAnimation
                  >{{x.title}}</h2>
                <h2 *ngIf="x.focused" class="tidbit-title" ibFadeInAnimation
                  >{{x.title}}</h2>
                <div *ngIf="x.focused" class="tidbit-body"
                  ibChildAddedAnimation
                  >
                  <p *ngFor="let line of x.body">{{line}}</p>
                </div>
              </div>
            </ng-template>
            </swiper>

          </ion-card-content>
        </ion-card>
      </div>
    </ng-template>

    <!-- rethinks vertical slide -->
    <!-- note on ngIf: there is some kind of visual bug overlapping nested slides after some threshold with cube effect -->
    <!-- <ng-template swiperSlide>
      <div *ngIf="mainSwiper?.realIndex === 3" class="swiper-slide-content">
        <ion-card>
          <ion-card-header>
            <ion-card-title>rethinks</ion-card-title>
            <ion-card-subtitle>unbox your mind</ion-card-subtitle>
          </ion-card-header>

          <ion-card-content>
            <swiper class="swiper-container-vertical"
              [autoplay]="false" [speed]="500"
              [navigation]="true" [direction]="'vertical'" [spaceBetween]="0"
              [loop]="true" [freeMode]="false" [slidesPerView]="3"
              [loopPreventsSlide]="false" [mousewheel]="true"
              [keyboard]="true"
              [allowTouchMove]="true" [grabCursor]="true"
              (swiper)="handleSwiper($event, 'rethinks')"
              (slideChange)="handleVertSlideChange($event[0], 'rethinks')"
              >
            <ng-template *ngFor="let x of verticalSwiperTidbits.rethinks" swiperSlide>
              <div class="slide-with-border tidbit">

                <h2 *ngIf="!x.focused" class="tidbit-title" ibFadeOutAnimation
                  >{{x.title}}</h2>
                <h2 *ngIf="x.focused" class="tidbit-title" ibFadeInAnimation
                  >{{x.title}}</h2>
                <p *ngIf="x.focused" class="tidbit-body"
                  ibChildAddedAnimation
                  >{{x.body}}</p>
              </div>
            </ng-template>
            </swiper>

          </ion-card-content>
        </ion-card>
      </div>
    </ng-template> -->

  </swiper>

  <ion-footer>
    <ion-buttons>
      <ion-button title="root beer...cheers!" color="primary" (click)="handleCheers()">
        <ion-icon name="beer-outline"></ion-icon>
      </ion-button>
      <ion-button color="primary" (click)="handlePrevSlide()">
        <ion-icon name="chevron-back-outline"></ion-icon>
      </ion-button>
      <ion-button color="primary" (click)="handleNextSlide()">
        <ion-icon name="chevron-forward-outline"></ion-icon>
      </ion-button>
      <ion-button *ngIf="!alreadyHasLocalSpace" color="primary" (click)="handleGo()">
        <ion-label *ngIf="!going">{{goText}}</ion-label>
        <ion-spinner *ngIf="going" name="circles" color="tertiary"></ion-spinner>
      </ion-button>
    </ion-buttons>
  </ion-footer>
</ion-content>
